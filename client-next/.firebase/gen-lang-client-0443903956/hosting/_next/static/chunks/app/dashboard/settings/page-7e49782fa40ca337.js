(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4631],{667:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(5155),n=a(2115),o=a(7024),s=a(63),i=a(5125),c=a(2451),l=a(6520);function d(){let e=(0,s.useRouter)(),{user:t,logout:a}=(0,o.J)(),{isDarkMode:d,setTheme:m,syncWithUserPreferences:x}=(0,l.D)(),[u,g]=(0,n.useState)(null),[h,p]=(0,n.useState)(!0),[f,b]=(0,n.useState)(!1),[y,j]=(0,n.useState)(null),[v,N]=(0,n.useState)({first_name:"",last_name:"",notifications_enabled:!0,email_notifications:!0,theme:"light",language:"en"});(0,n.useEffect)(()=>{if(!t)return void e.push("/login");!async function(){try{var e,t,a,r,n,o,s;let c=localStorage.getItem("jwt"),l=(await i.A.get("/api/user/profile",{headers:{Authorization:"Bearer ".concat(c)}})).data.user;g(l);let d=l.name?l.name.split(" "):["",""],m=d[0]||"",u=d.slice(1).join(" ")||"";N({first_name:m,last_name:u,notifications_enabled:null==(o=null==(e=l.preferences)?void 0:e.notifications_enabled)||o,email_notifications:null==(s=null==(t=l.preferences)?void 0:t.email_notifications)||s,theme:(null==(a=l.preferences)?void 0:a.theme)||"light",language:(null==(r=l.preferences)?void 0:r.language)||"en"});let h=(null==(n=l.preferences)?void 0:n.theme)||"light";x(h)}catch(e){console.error("Failed to fetch profile:",e),j({type:"error",text:"Failed to load profile data."})}finally{p(!1)}}()},[t,e]);let w=e=>{let{name:t,value:a,type:r}=e.target;N(n=>({...n,[t]:"checkbox"===r?e.target.checked:a}))},_=async()=>{b(!0),j(null);try{let e=localStorage.getItem("jwt");await i.A.put("/api/user/profile",{first_name:v.first_name,last_name:v.last_name,email:(null==u?void 0:u.email)||"",preferences:{notifications_enabled:v.notifications_enabled,email_notifications:v.email_notifications,theme:v.theme,language:v.language}},{headers:{Authorization:"Bearer ".concat(e)}}),j({type:"success",text:"Profile updated successfully!"})}catch(e){console.error("Failed to update profile:",e),j({type:"error",text:"Failed to update profile. Please try again."})}finally{b(!1)}},k=async()=>{if(confirm("Are you sure you want to delete your account? This action cannot be undone."))try{let t=localStorage.getItem("jwt");await i.A.delete("/api/user/profile",{headers:{Authorization:"Bearer ".concat(t)}}),a(),e.push("/")}catch(e){console.error("Failed to delete account:",e),j({type:"error",text:"Failed to delete account. Please try again."})}};return h?(0,r.jsx)("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-rose-primary text-xl",children:"Loading..."})}):(0,r.jsx)("div",{className:"min-h-screen transition-colors duration-300 ".concat(d?"bg-gray-900":"bg-cream"),children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsxs)(c.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-heading font-bold mb-2 ".concat(d?"text-white":"text-rose-primary"),children:"Profile Settings"}),(0,r.jsx)("p",{className:"font-body ".concat(d?"text-gray-300":"text-rose-accent"),children:"Manage your account preferences and personal information"})]}),y&&(0,r.jsx)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-lg ".concat("success"===y.type?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:y.text}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(c.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"rounded-lg shadow-lg p-6 transition-colors duration-300 ".concat(d?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"),children:[(0,r.jsx)("h2",{className:"text-2xl font-heading font-semibold mb-4 ".concat(d?"text-white":"text-rose-primary"),children:"Profile Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(d?"text-gray-300":"text-rose-accent"),children:"First Name"}),(0,r.jsx)("input",{type:"text",name:"first_name",value:v.first_name,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-primary focus:border-transparent transition-colors duration-300 ".concat(d?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"border-rose-accent/30"),placeholder:"Enter your first name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(d?"text-gray-300":"text-rose-accent"),children:"Last Name"}),(0,r.jsx)("input",{type:"text",name:"last_name",value:v.last_name,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-primary focus:border-transparent transition-colors duration-300 ".concat(d?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"border-rose-accent/30"),placeholder:"Enter your last name"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(d?"text-gray-300":"text-rose-accent"),children:"Email"}),(0,r.jsx)("input",{type:"email",value:(null==u?void 0:u.email)||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg cursor-not-allowed transition-colors duration-300 ".concat(d?"bg-gray-700 border-gray-600 text-gray-400":"border-rose-accent/30 bg-gray-50 text-gray-500")}),(0,r.jsx)("p",{className:"text-xs mt-1 ".concat(d?"text-gray-400":"text-rose-accent/60"),children:"Email cannot be changed"})]})]}),(0,r.jsxs)(c.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"rounded-lg shadow-lg p-6 transition-colors duration-300 ".concat(d?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"),children:[(0,r.jsx)("h2",{className:"text-2xl font-heading font-semibold mb-4 ".concat(d?"text-white":"text-rose-primary"),children:"Preferences"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium ".concat(d?"text-gray-300":"text-rose-accent"),children:"Push Notifications"}),(0,r.jsx)("p",{className:"text-xs ".concat(d?"text-gray-400":"text-rose-accent/60"),children:"Receive notifications about your progress"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"notifications_enabled",checked:v.notifications_enabled,onChange:w,className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-rose-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-rose-primary ".concat(d?"bg-gray-600":"bg-rose-accent/30")})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium ".concat(d?"text-gray-300":"text-rose-accent"),children:"Email Notifications"}),(0,r.jsx)("p",{className:"text-xs ".concat(d?"text-gray-400":"text-rose-accent/60"),children:"Receive updates via email"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"email_notifications",checked:v.email_notifications,onChange:w,className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-rose-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-rose-primary ".concat(d?"bg-gray-600":"bg-rose-accent/30")})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(d?"text-gray-300":"text-rose-accent"),children:"Theme"}),(0,r.jsxs)("select",{name:"theme",value:v.theme,onChange:e=>{var t;return t=e.target.value,void(N(e=>({...e,theme:t})),m(t))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-primary focus:border-transparent transition-colors duration-300 ".concat(d?"bg-gray-700 border-gray-600 text-white":"border-rose-accent/30"),children:[(0,r.jsx)("option",{value:"light",children:"Light"}),(0,r.jsx)("option",{value:"dark",children:"Dark"}),(0,r.jsx)("option",{value:"auto",children:"Auto (System)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(d?"text-gray-300":"text-rose-accent"),children:"Interface Language"}),(0,r.jsxs)("select",{name:"language",value:v.language,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-primary focus:border-transparent transition-colors duration-300 ".concat(d?"bg-gray-700 border-gray-600 text-white":"border-rose-accent/30"),children:[(0,r.jsx)("option",{value:"en",children:"English"}),(0,r.jsx)("option",{value:"es",children:"Espa\xf1ol"}),(0,r.jsx)("option",{value:"fr",children:"Fran\xe7ais"}),(0,r.jsx)("option",{value:"de",children:"Deutsch"}),(0,r.jsx)("option",{value:"it",children:"Italiano"}),(0,r.jsx)("option",{value:"pt",children:"Portugu\xeas"})]})]})]})]}),(0,r.jsx)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex justify-end",children:(0,r.jsx)("button",{onClick:_,disabled:f,className:"bg-rose-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-rose-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Saving...":"Save Changes"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(c.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:"rounded-lg shadow-lg p-6 transition-colors duration-300 ".concat(d?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"),children:[(0,r.jsx)("h3",{className:"text-lg font-heading font-semibold mb-4 ".concat(d?"text-white":"text-rose-primary"),children:"Account Information"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"".concat(d?"text-gray-400":"text-rose-accent/60"),children:"Member since:"}),(0,r.jsx)("p",{className:"font-medium ".concat(d?"text-white":"text-rose-primary"),children:(null==u?void 0:u.created_at)?new Date(u.created_at).toLocaleDateString():"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"".concat(d?"text-gray-400":"text-rose-accent/60"),children:"User ID:"}),(0,r.jsx)("p",{className:"font-mono text-xs ".concat(d?"text-gray-300":"text-rose-primary"),children:(null==u?void 0:u.id)||"N/A"})]})]})]}),(0,r.jsxs)(c.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"rounded-lg shadow-lg p-6 transition-colors duration-300 ".concat(d?"bg-gray-800 border border-red-800":"bg-white border border-red-200"),children:[(0,r.jsx)("h3",{className:"text-lg font-heading font-semibold text-red-600 mb-4",children:"Danger Zone"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-red-600 mb-2",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-xs text-red-500 mb-3",children:"Once you delete your account, there is no going back. Please be certain."}),(0,r.jsx)("button",{onClick:k,className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700 transition-colors",children:"Delete Account"})]})})]})]})]})]})})}},6922:(e,t,a)=>{Promise.resolve().then(a.bind(a,667))}},e=>{e.O(0,[9135,1497,2451,8789,335,8441,1255,7358],()=>e(e.s=6922)),_N_E=e.O()}]);